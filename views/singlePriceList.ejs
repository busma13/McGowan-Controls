<%- include('partials/header') -%>
<div class="container mx-auto">
    <div class="flex justify-center lg:justify-end mt-5 mx-2">
        <div>
            <p><strong>Employee Name</strong>: <%= user.userName %></p>
            <p><strong>Email</strong>: <%= user.email %></p>
        </div>
    </div>
    <div class="mt-24 mx-5 lg:mx-24">
        <!-- editable product table -->
        <div class="container">
            <div id="table-container">
                <table class="editable">
                    <tbody id="table-body" data-listid="<%= listId %>"> 
                        <tr>
                            <th></th>
                            <th>Item Name</th>
                            <th>Price</th>
                            <th>Note</th>
                        </tr>
                            <% listItems.forEach( (el, i) => { %>
                                <tr id="<%= el.id %>">
                                    <td>
                                        <button class="btn modal-button item-modal-button fa fa-trash" data-id="<%= el.id  %>"></button>
                                    </td>
                                    <td class="itemName"><%= el.itemName %></td>
                                    <td class="itemPrice"><%= el.itemPrice %></td>
                                    <td class="note"><%= el.note %></td>
                                </tr>
                            <% }) %>    
                    </tbody>
                </table>
            </div>
        </div><!-- / editable product table -->
        
    </div>
    <div class="m-5">
        <h2>Add item</h2>
        <form action="/priceLists/createPriceListItem/<%= listId %>" method="POST">
          <div class="mb-3">
              <label for="itemName" class="form-label">Item Name</label>
              <input type="text" class="form-control" id="itemName" name="itemName">
          </div>
          <div class="mb-3">
            <label for="itemPrice" class="form-label">Price</label>
            <input type="number" min="0.01" step="0.01" max="30000" class="form-control" id="itemPrice" name="itemPrice"/>
        </div>
        <div class="mb-3">
            <label for="itemNote" class="form-label">Note</label>
            <input type="text" class="form-control" id="itemNote" name="itemNote">
        </div>
          <button type="submit" class="btn btn-primary">Add</button>
        </form>
      </div>
</div>

<!-- Modal to confirm item deletion-->
<input type="checkbox" id="delete-item-modal" class="modal-toggle" />
<div class="modal modal-bottom sm:modal-middle">
  <div class="modal-box">
    <h3 class="font-bold text-lg">Delete Item</h3>
    <p class="py-4">Are you sure you want to delete this item?</p>
    <div class="modal-action">
      <button class="btn cancel-delete-item">Cancel</button>
      <form action="/priceLists/deletePriceListItem/<%= listId %>/" method="POST" class="col-3">
        <button type="submit" class="btn btn-rounded btn-danger btn-modal" id="btn-delete-item" data-id="0">Delete</button>
      </form>
    </div>
  </div>
</div>

<script src="../js/editablePriceList.js"></script>
<script src="../js/deleteItemModal.js"></script>
<%- include('partials/footer') -%>